@{
    ViewData["Title"] = "Calendar";
}

<h2>@ViewData["Title"]</h2>

<div id="calendar"></div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                events: '/Calendar/GetEvents'
            });
            calendar.render();
        });

    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            dateClick: function(info) {
                // Set the selected date in the hidden input
                document.getElementById('selectedDate').value = info.dateStr;

                // Open the modal
                $('#bookingModal').modal('show');
            }
        });

        calendar.render();
    });
    </script>

    <div class="modal fade" id="bookingModal" tabindex="-1" role="dialog" aria-labelledby="bookingModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="bookingModalLabel">Create Booking</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="bookingForm">
                        <div class="form-group">
                            <!-- skal være kun tidspunkt, da man jo klikker på datoen-->
                            <label for="startTime">Start Time</label>
                            <input type="datetime-local" class="form-control" id="startTime" required>
                        </div>
                        <div class="form-group">
                            <label for="endTime">End Time</label>
                            <input type="datetime-local" class="form-control" id="endTime" required>
                        </div>
                        <div class="form-group">
                            <label for="room">Room</label>
                            <select class="form-control" id="room" required>
                            </select>
                        </div>
                        <!-- skal auto hentes fra sin session/identity? -->
                        <div class="form-group">
                            <label for="residency">Residency</label>
                            <select class="form-control" id="residency" required>
                            </select>
                        </div>
                        <input type="hidden" id="selectedDate">
                        <button type="submit" class="btn btn-primary">Save Booking</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

}
